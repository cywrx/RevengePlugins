(function(n,e,t,o,i,r){"use strict";const u=e.findByProps("dispatch","subscribe"),s=e.findByProps("getStatus"),c=e.findByProps("getFriendIDs"),l=e.findByProps("getChannel"),d=e.findByProps("getGuild"),f=e.findByProps("getUser");i.trackFriends??=true,i.userIds??=[];const g={};const p=()=>[...new Set([...(i.trackFriends?c.getFriendIDs():[]),...i.userIds])],v=n=>f.getUser(n)?.username??n;let m,y,h;var S={onLoad:()=>{for(const n of p())g[n]=s.getStatus(n);m=t.after("dispatch",u,([n])=>{if(n?.type!=="PRESENCE_UPDATE")return;const e=n.user?.id;p().includes(e)&&g[e]!==n.status&&(g[e]=n.status,o.showToast(`${v(e)} is now ${n.status}`))});const n=n=>{const e=n?.message,t=e?.author?.id;if(!p().includes(t))return;const i=l.getChannel(e.channel_id);if(!i)return;if(i.guild_id){const n=d.getGuild(i.guild_id);o.showToast(`${v(t)} messaged in ${n?.name} #${i.name}`)}else i.type===3?o.showToast(`${v(t)} messaged in group`):o.showToast(`${v(t)} messaged in DM`)},e=n=>{const e=n?.userId;if(!p().includes(e))return;const t=l.getChannel(n.channelId);if(!t)return;if(t.guild_id){const n=d.getGuild(t.guild_id);o.showToast(`${v(e)} typing in ${n?.name} #${t.name}`)}else t.type===3?o.showToast(`${v(e)} typing in group`):o.showToast(`${v(e)} typing in DM`)};u.subscribe("MESSAGE_CREATE",n),u.subscribe("TYPING_START",e),y=()=>u.unsubscribe("MESSAGE_CREATE",n),h=()=>u.unsubscribe("TYPING_START",e)},onUnload:()=>{m?.(),y?.(),h?.()},settings:r};return n.default=S,Object.defineProperty(n,"__esModule",{value:!0}),n})({},vendetta.metro,vendetta.patcher,vendetta.ui.toasts,vendetta.plugin.storage,null);

