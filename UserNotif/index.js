(function(v,m,p,t,s,c){"use strict";const f=m.findByProps("dispatch","subscribe"),gS=m.findByProps("getStatus"),rS=m.findByProps("getFriendIDs"),cS=m.findByProps("getChannel"),gU=m.findByProps("getGuild"),uS=m.findByProps("getUser"),{React:R,ReactNative:RN}=c;if(s.trackFriends===undefined)s.trackFriends=true;if(!s.userIds)s.userIds=[];const lS={};const gT=()=>{const i=new Set();if(s.trackFriends){for(const d of rS.getFriendIDs())i.add(d)}for(const d of s.userIds)i.add(d);return[...i]};const gN=(i)=>uS.getUser(i)?.username??i;let uP,uM,uT;const Set=()=>{const[fD,sF]=R.useState(s.trackFriends),[vL,sV]=R.useState(s.userIds?.join(",")??"");return R.createElement(RN.ScrollView,{style:{flex:1,padding:16,backgroundColor:"#2f3136"}},R.createElement(RN.View,{style:{flexDirection:"row",alignItems:"center",marginBottom:16}},R.createElement(RN.Switch,{value:fD,onValueChange:(v)=>{s.trackFriends=v;sF(v)}}),R.createElement(RN.Text,{style:{color:"#fff",marginLeft:8}},"Track Friends")),R.createElement(RN.TextInput,{placeholder:"User IDs (comma separated)",placeholderTextColor:"#ccc",value:vL,onChangeText:sV,style:{borderWidth:1,borderColor:"#7289da",padding:10,borderRadius:8,color:"#fff",backgroundColor:"#202225",marginBottom:12}}),R.createElement(RN.TouchableOpacity,{onPress:()=>{const i=vL.split(",").map(x=>x.trim()).filter(x=>x);s.userIds=i;t.showToast(`Tracking ${i.length} manual IDs`)},style:{backgroundColor:"#7289da",padding:12,borderRadius:8,alignItems:"center"}},R.createElement(RN.Text,{style:{color:"#fff",fontWeight:"bold"}},"Apply")))};var h={onLoad(){for(const i of gT())lS[i]=gS.getStatus(i);uP=p.after("dispatch",f,([a])=>{if(a?.type!=="PRESENCE_UPDATE")return;const i=a.user?.id;if(!gT().includes(i))return;if(lS[i]!==a.status){lS[i]=a.status;t.showToast(`${gN(i)} is now ${a.status}`)}});const oM=(a)=>{const m=a?.message,i=m?.author?.id;if(!gT().includes(i))return;const n=cS.getChannel(m.channel_id);if(!n)return;if(n.guild_id){const g=gU.getGuild(n.guild_id);t.showToast(`${gN(i)} messaged in ${g?.name} #${n.name}`)}else if(n.type===3){t.showToast(`${gN(i)} messaged in group`)}else{t.showToast(`${gN(i)} messaged in DM`)}};const oT=(a)=>{const i=a?.userId;if(!gT().includes(i))return;const n=cS.getChannel(a.channelId);if(!n)return;if(n.guild_id){const g=gU.getGuild(n.guild_id);t.showToast(`${gN(i)} typing in ${g?.name} #${n.name}`)}else if(n.type===3){t.showToast(`${gN(i)} typing in group`)}else{t.showToast(`${gN(i)} typing in DM`)}};f.subscribe("MESSAGE_CREATE",oM);f.subscribe("TYPING_START",oT);uM=()=>f.unsubscribe("MESSAGE_CREATE",oM);uT=()=>f.unsubscribe("TYPING_START",oT)},onUnload(){uP?.();uM?.();uT?.()},settings:Set};return v.default=h,v})({},vendetta.metro,vendetta.patcher,vendetta.ui.toasts,vendetta.plugin.storage,vendetta.metro.common);

