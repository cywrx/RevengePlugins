(function(v,m,p,t,s,c){"use strict";const f=m.findByProps("dispatch","subscribe"),g=m.findByProps("getStatus"),ch=m.findByProps("getChannel"),uS=m.findByProps("getUser"),r=m.findByProps("subscribeUserIds"),{React:R,ReactNative:RN}=c;let u,i;const y=(x)=>t.showToast(x),l={};const Set=()=>{const[val,setVal]=R.useState(s.userIds?.join(",")??"");return R.createElement(RN.ScrollView,{style:{flex:1,padding:16,backgroundColor:"#2f3136"}},R.createElement(RN.View,{style:{marginBottom:12}},R.createElement(RN.TextInput,{placeholder:"User IDs",placeholderTextColor:"#ccc",value:val,onChangeText:setVal,style:{borderWidth:1,borderColor:"#7289da",padding:10,borderRadius:8,color:"#fff",backgroundColor:"#202225"}})),R.createElement(RN.TouchableOpacity,{onPress:()=>{const ids=val.split(",").map(x=>x.trim()).filter(x=>x);s.userIds=ids;r?.subscribeUserIds?.(ids);y(`Tracking ${ids.length} users`)},style:{backgroundColor:"#7289da",padding:12,borderRadius:8,alignItems:"center"}},R.createElement(RN.Text,{style:{color:"#fff",fontWeight:"bold"}},"Apply")))};var h={onLoad(){const d=()=>s.userIds??[];const q=d();if(q.length)r?.subscribeUserIds?.(q);for(const x of q)l[x]=g.getStatus(x);i=setInterval(()=>{const q2=d();if(q2.length)r?.subscribeUserIds?.(q2)},15000);u=p.before("dispatch",f,([a])=>{const u2=d();if(a.type==="PRESENCE_UPDATE"){const x=a.user?.id;if(u2.includes(x)){const k=a.status;if(l[x]!==k){l[x]=k;const nm=uS.getUser(x)?.username||x;y(`${nm} is now ${k}`)}}}else if(a.type==="MESSAGE_CREATE"){const x=a.message?.author?.id;if(u2.includes(x)){const cn=ch.getChannel(a.message?.channel_id)?.name||"DMs";const nm=uS.getUser(x)?.username||x;y(`${nm} messaged in #${cn}`)}}})},onUnload(){u?.();if(i)clearInterval(i)},settings:Set};return v.default=h,v})({},vendetta.metro,vendetta.patcher,vendetta.ui.toasts,vendetta.plugin.storage,vendetta.metro.common);

